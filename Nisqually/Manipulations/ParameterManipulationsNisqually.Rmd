---
title: "Parameter Manipulation - Nisqually"
output: ioslides_presentation
date: "`r Sys.Date()`"
---

```{r setup, message = FALSE, echo = FALSE, warning = FALSE}
knitr::opts_knit$set(root.dir = '~/GitHub/PinnipedCaseStudies')
library(knitr)
library(kableExtra)

fig.height <- 3
fig.width <- 6
font_size <- 12

source("Functions/01_predictFish.R")
source("Functions/makeArray.R")
source("Functions/createHarvestPlan.R")
source("Functions/decideForagingDestination.R")
source("Functions/collusion.R")
source("Functions/rungeKutta_3.R")
source("Functions/getHarvested.R")
source("Functions/learnX.R")
source("Functions/learnY.R")
source("Functions/type3FuncRes.R")
source("Functions/linearFuncRes.R")
source("Functions/updateLearning.R")
source("Functions/showManipulations.R")
```

## Purpose

This presentation is meant to document single parameter manipulations. The main comparison responses are the number of seals at the Gauntlet and the number of salmon escaped total of each species.

## The Base Run Realm

```{r base run realm, message = FALSE, echo = FALSE, warning = FALSE, fig.height = fig.height, fig.width = fig.width}

source("Nisqually/02_Prep_Nisqually_Salmon_Data.R")
source("Nisqually/03_Nis_set_pars_All.R")
source("Nisqually/04_Nis_initialize_variables_All.R")

source("Nisqually/Manipulations/assembleLegosNis.R")

(plot_seals + theme_classic()) / (eaten_sp_plot+ theme_classic())

base_salmon_escapement <- data.frame(Run = "Base", salmon_escapement)
kable(salmon_escapement, caption = "Escaped Salmon") %>% kable_styling(full_width = F, font_size = font_size)
```

## num_seals

```{r num_seals, message = FALSE, echo = FALSE, warning = FALSE, fig.height = fig.height, fig.width = fig.width}

source("Nisqually/02_Prep_Nisqually_Salmon_Data.R")
source("Nisqually/03_Nis_set_pars_All.R")
num_seals_list <- seq(from = 1, to = 200, by = 50)
num_ej_list <- seq(from = 1, to = 200, by = 50)
num_zc_list <- seq(from = 1, to = 200, by = 50)

Escape <- data.frame(Seals = 0, Chum = 0, Chinook_GR = 0, Chinook_LN = 0)

for(i in 1:length(num_seals_list)){
  num_seals <- num_seals_list[i]
  num_ej <- num_ej_list[i]
  num_zc <- num_zc_list[i]
  source("Nisqually/04_Nis_initialize_variables_All.R")
  source("Nisqually/Manipulations/assembleLegosNis.R")
  Escape[i,] <- data_frame(Seals = num_seals, salmon_escapement)
}

showManipulations(output = Escape, parameter = "num_seals", 150)[1]
showManipulations(output = Escape, parameter = "num_seals", 150)[[2]]

```


